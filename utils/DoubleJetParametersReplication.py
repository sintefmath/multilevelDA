## PARAMETERS 
# Collecting all relevant parameter for the experiments
# in this separate file

import numpy as np

#TODO: Allow for different parameter sets

start_basis = 1
num_bases = 7
sim_model_error_basis_args = {
                            "basis_x_start": start_basis+1, 
                            "basis_x_end": start_basis+1+num_bases,
                            "basis_y_start": start_basis,
                            "basis_y_end": start_basis+num_bases,

                            "kl_decay": 0.9,
                            "kl_scaling": 0.001,
                            }

sim_model_error_timestep=60.0

# Parameters for time
T_spinup = 3*24*3600
T_da = 7*24*3600
T_forecast = 3*24*3600

# Parameters for truth obervation
xdim = 1332000.0
ydim = 666000.0

xs = np.linspace(0, xdim, 10, endpoint=False)
ys = np.linspace(0, ydim, 5, endpoint=False)

[obs_xs, obs_ys] = np.array(np.meshgrid(xs, ys)).T.reshape(-1, 2).T

R = [0.5, 500, 500]

# Parameters for assimilation
obs_var = slice(1,3)
r = 5e4
relax_factor = 0.25
min_location_level = 0

da_timestep = 900

# Drifters (generated with notebooks/DoubleJetMLDrifters.ipynb)
init_positions = np.array([[1146819.04661686,  163427.72951894],
       [1002696.77695877,  438911.18484081],
       [ 689583.9359827 ,  489252.4146955 ],
       [ 798868.81707473,  116456.43203238],
       [ 871635.34680058,  340067.87119027],
       [1070910.6203248 ,  316380.41437909],
       [ 184408.46473486,   66936.95106001],
       [ 658919.0014823 ,  544152.8720872 ],
       [ 565603.99414725,  215033.78057141],
       [1070616.85187128,  619782.43830446],
       [1007469.46738862,   74769.79936175],
       [ 990938.10770801,  427834.50638948],
       [ 497689.52145989,  310556.74035477],
       [1072861.9740629 ,  378391.57204304],
       [ 854433.73684816,  116557.79900318],
       [ 472502.85094952,  140971.62803991],
       [1194461.77087199,  177231.78347876],
       [   4083.70674324,  113198.85971588],
       [ 835838.10486194,  553785.89112067],
       [ 949280.21126198,  127734.81814247],
       [1009518.72229554,  633137.57218923],
       [ 781564.05744705,  385367.52594099],
       [ 596745.94009074,   76325.8223886 ],
       [ 225363.5168675 ,  296766.21041878],
       [1091754.23782853,  355779.733163  ],
       [1171155.07000622,  435306.35044846],
       [  78589.2426698 ,  403471.81036724],
       [ 964553.63886175,  571406.52517204],
       [  86457.18806927,  456934.2758322 ],
       [ 529864.96881904,   43206.6333893 ],
       [1059135.93816507,  546686.62662548],
       [1227248.09135353,  295162.18988842],
       [ 820332.66981915,  138464.87526291],
       [ 743702.76218957,  653994.98705479],
       [ 702790.17321233,  447534.8648633 ],
       [ 498123.19580372,  151207.32478222],
       [ 404506.03861078,  159945.8239489 ],
       [ 639557.04387651,  172052.82287621],
       [1306437.11205408,  478239.16761104],
       [1027652.39018355,  382503.99808233],
       [ 428511.51374984,  354668.15791503],
       [ 164897.95395021,   67636.20487321],
       [1264049.81734166,  217598.81880957],
       [ 746323.01430372,  400544.77385682],
       [1247554.70520792,   34917.84024846],
       [ 770309.20357761,  557039.02020265],
       [ 863484.32971557,  250124.14905376],
       [ 534651.69133997,  257822.60314093],
       [1309233.85834514,  217164.2632676 ],
       [ 264096.03668649,  309772.9696316 ],
       [  76133.80713006,  421170.35966699],
       [ 912841.59782348,  245214.07210712],
       [ 740905.68756402,   76233.12895452],
       [   5887.9462705 ,  531753.55629255],
       [  50460.65858369,   99266.0283008 ],
       [ 236402.53302765,  488796.15230641],
       [ 211344.4890972 ,  164456.96242813],
       [ 426059.66837775,  218203.41238664],
       [ 498511.86030635,   59329.24295741],
       [ 199275.53331505,  599697.88039542],
       [ 137556.22678797,  188725.71803405],
       [1181881.97011525,  264279.33881518],
       [ 304425.69197729,  263464.83347037],
       [ 716257.32063361,  304912.20048414],
       [ 990271.98176003,  144693.03751081],
       [ 588949.75205929,   82121.73837651],
       [ 735699.93702059,   83723.42869556],
       [ 727134.87814043,  347793.63102967],
       [ 736044.29229139,  300133.84702461],
       [  79228.29797502,   25392.11758095],
       [ 561390.93064276,  427002.9789154 ],
       [1178759.21691018,    3146.66203139],
       [ 826327.11260676,  164541.21349686],
       [ 905723.70415951,  341002.97645273],
       [ 474400.58099703,  360491.09927035],
       [ 824091.27423776,  302721.80553949],
       [ 981632.82808178,  658091.42701761],
       [ 429866.62852919,  334798.98076529],
       [ 822862.15571642,  660331.86550722],
       [ 560952.25012645,  411927.93260061],
       [ 905995.07127291,  457089.34110878],
       [  76586.23022595,  286990.04649431],
       [ 645469.73635456,  251069.06587222],
       [ 305215.97557813,   11827.50464685],
       [1270553.04787225,  469069.29148258],
       [ 514108.39739447,  430157.97002749],
       [ 227407.97230805,  382767.868351  ],
       [ 659318.14238027,   49136.34015864],
       [1001493.55945944,  627221.86548367],
       [1086304.15690547,  329807.27051322],
       [  54028.07434531,  213797.20876477],
       [ 204411.73495853,  454853.89618528],
       [ 699007.22632283,  421768.29268495],
       [1288409.66008355,  457207.04214823],
       [1310628.0083801 ,  177242.75751251],
       [ 195054.68663136,  600927.65893297],
       [ 270753.61529779,  659095.96697847],
       [  26641.07911198,  534902.66011345],
       [ 762273.73738696,  574947.38661701],
       [ 554030.26693109,  329217.70781043]])